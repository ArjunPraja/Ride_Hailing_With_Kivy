<ViewUpdateVehicleScreen>:
    name: "view_update_vehicle"

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        # Top bar with title and back button
        MDBoxLayout:
            size_hint_y: None
            height: dp(50)
            spacing: 10

            MDLabel:
                text: "[b]YOUR VEHICLES[/b]"
                markup: True
                font_style: "H4"
                halign: "center"
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1

            MDRaisedButton:
                text: "Back"
                md_bg_color: 0.9,0.2,0.2,1
                text_color: 1,1,1,1
                size_hint_x: None
                width: dp(80)
                on_release: app.root.current = "driver_menu"

        # Table header
        MDBoxLayout:
            size_hint_y: None
            height: dp(30)
            spacing: 5
            padding: [5,0,5,0]

            MDLabel:
                text: "Driver ID"
                bold: True
            MDLabel:
                text: "Brand"
                bold: True
            MDLabel:
                text: "Model"
                bold: True
            MDLabel:
                text: "Year"
                bold: True
            MDLabel:
                text: "Plate"
                bold: True
            MDLabel:
                text: "Color"
                bold: True
            MDLabel:
                text: "Action"
                bold: True

        # Vehicle list
        RecycleView:
            id: vehicle_list
            viewclass: "VehicleListItem"
            RecycleBoxLayout:
                default_size: None, dp(50)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: "vertical"

        # Update form at bottom (initially hidden)
        ScrollView:
            size_hint_y: None
            height: dp(300)
            MDBoxLayout:
                id: update_form
                orientation: "vertical"
                padding: [10,10,10,10]
                spacing: 15
                size_hint_y: None
                height: self.minimum_height
                opacity: 1 if root.show_update_form else 0
                disabled: False if root.show_update_form else True

                MDLabel:
                    text: "[b]UPDATE VEHICLE[/b]"
                    markup: True
                    halign: "center"
                    font_style: "H5"
                    theme_text_color: "Custom"
                    text_color: 0,0,0,1

                MDTextField:
                    id: brand_input
                    hint_text: "Brand"
                    mode: "rectangle"

                MDTextField:
                    id: model_input
                    hint_text: "Model"
                    mode: "rectangle"

                MDTextField:
                    id: year_input
                    hint_text: "Year"
                    mode: "rectangle"
                    input_filter: "int"

                MDTextField:
                    id: plate_input
                    hint_text: "Plate Number"
                    mode: "rectangle"

                MDTextField:
                    id: color_input
                    hint_text: "Color"
                    mode: "rectangle"

                MDRaisedButton:
                    text: "Update Vehicle"
                    md_bg_color: 0.2,0.5,0.9,1
                    text_color: 1,1,1,1
                    pos_hint: {"center_x":0.5}
                    on_release: root.update_vehicle()

<VehicleListItem>:
    orientation: "horizontal"
    spacing: 5
    padding: [5,5,5,5]

    MDLabel:
        text: root.driver_id
        size_hint_x: 0.15
    MDLabel:
        text: root.brand
        size_hint_x: 0.15
    MDLabel:
        text: root.model
        size_hint_x: 0.15
    MDLabel:
        text: root.year
        size_hint_x: 0.1
    MDLabel:
        text: root.plate
        size_hint_x: 0.15
    MDLabel:
        text: root.color
        size_hint_x: 0.15
    MDRaisedButton:
        text: "Update"
        size_hint_x: 0.15
        md_bg_color: 0.2,0.5,0.9,1
        text_color: 1,1,1,1
        on_release: root.open_update_form()
